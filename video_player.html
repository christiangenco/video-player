<html>
<head>
<style>
body, html{
  margin: 0;
  padding: 0;
  /*background-color: black;*/
}

video{
  width: 100vw;
  height: 100vh;
}
</style>
</head>
<body>

<div id="videos"></div>

<!-- <video src="videos/01.mp4"></video> -->

<script>
const videoUrls = [
  "videos/01.mp4",
  "videos/00.mp4",
  "videos/02.mp4",
];

const videosContainer = document.querySelector('#videos');
const videos = videoUrls.map((src, i) => {
  const video = document.createElement("video");
  video.src = src;
  video.preload = "auto";
  // if(i !== videoIndex) video.style.display="none"
  videosContainer.appendChild(video);
  return video;
});

// preload?
// videos.map(video => {
//   video.play().then(() => {
//     console.log("playing");
//   })
// });

let videoIndex = 0;
const setIndex = (index) => {
  // console.info(`setting index=${index}`);
  videoIndex = Math.max(0, Math.min(index, videos.length-1));

  videos.map((video, i) => {
    if(i === videoIndex){
      video.style.display = "block";
      video.currentTime = 0;
      video.play();
    }else{
      video.style.display = "none";
      video.pause();
    }
  });
}

window.addEventListener('mousedown', () => {
  setIndex(videoIndex+1);
});

window.addEventListener('keydown', (e) => {
  if(e.keyCode === 39){ // right
    setIndex(videoIndex+1);
  }else if(e.keyCode === 37){ // left
    setIndex(videoIndex-1);
  }
});

</script>
</body>
</html>
